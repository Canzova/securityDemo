â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ’¡ METHOD: generateTokenFromUserName()
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

This method:
---------------------------------------------------------------
public String generateTokenFromUserName(UserDetails userDetails)
---------------------------------------------------------------
â¡ Creates (generates) a JWT token for the given user.
That token will later be used for authentication.

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§© LINE-BY-LINE EXPLANATION
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

1ï¸âƒ£ Get the username
---------------------------------------------------------------
String userName = userDetails.getUsername();
---------------------------------------------------------------
- Extracts the username from the user details.
- Example: "john".

2ï¸âƒ£ Start building the token
---------------------------------------------------------------
Jwts.builder()
---------------------------------------------------------------
- Starts creating a new JWT token.

3ï¸âƒ£ Add the subject
---------------------------------------------------------------
.subject(userName)
---------------------------------------------------------------
- "Subject" means: who this token belongs to (usually username).

4ï¸âƒ£ Set the issue time
---------------------------------------------------------------
.issuedAt(new Date())
---------------------------------------------------------------
- Says when the token was created (current time).

5ï¸âƒ£ Set the expiration time
---------------------------------------------------------------
.expiration(new Date((new Date().getTime() + jwtExpirationMs)))
---------------------------------------------------------------
- Tells when the token will expire.
- `new Date().getTime()` â†’ current time in milliseconds.
- `jwtExpirationMs` â†’ how long token stays valid.
- Add them â†’ future time = expiration.
- Wrap in `new Date()` â†’ turns number into a Date object.

Example:
If now = 2:00 PM and valid for 1 hour â†’ expires at 3:00 PM.

6ï¸âƒ£ Sign the token
---------------------------------------------------------------
.signWith(key())
---------------------------------------------------------------
- Adds a â€œdigital signatureâ€ (secret key) to protect token from changes.
- Like stamping or sealing a document.

7ï¸âƒ£ Finish and return the token
---------------------------------------------------------------
.compact();
---------------------------------------------------------------
- Combines everything into a final string like:
  eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ SIMPLE SUMMARY
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
This method:
1ï¸âƒ£ Takes the username
2ï¸âƒ£ Adds creation and expiry times
3ï¸âƒ£ Signs it securely
4ï¸âƒ£ Returns a final token string

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸŸï¸ REAL-LIFE COMPARISON
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
Think of it as a movie ticket:

| JWT Step | Real Life Meaning |
|-----------|-------------------|
| subject(userName) | Personâ€™s name on ticket |
| issuedAt() | When ticket was printed |
| expiration() | When ticket expires |
| signWith() | Theaterâ€™s stamp/signature |
| compact() | Final printed ticket |

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ§  WHY NOT JUST USE (new Date().getTime() + jwtExpirationMs)?
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•

Because `.expiration()` needs a **Date object**, not a **number**.

---------------------------------------------------------------
new Date().getTime()          â¡ gives milliseconds (a number)
new Date(milliseconds)        â¡ gives a Date object
---------------------------------------------------------------

So we do:
---------------------------------------------------------------
new Date(new Date().getTime() + jwtExpirationMs)
---------------------------------------------------------------
âœ… This converts milliseconds into a Date object, which works.

Example:
---------------------------------------------------------------
current time = 1731252600000
jwtExpirationMs = 3600000 (1 hour)
---------------------------------------------------------------
new Date(1731252600000 + 3600000)
â¡ new Date(1731256200000)
â¡ â€œNov 10, 2025, 3:00 PMâ€

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ğŸ IN SIMPLE WORDS
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
> `.expiration()` canâ€™t take a number â€” it must take a Date.
> Thatâ€™s why we wrap it inside `new Date(...)`.

So:
---------------------------------------------------------------
âœ… new Date(new Date().getTime() + jwtExpirationMs)   âœ… Works
ğŸš« new Date().getTime() + jwtExpirationMs              âŒ Fails
---------------------------------------------------------------

â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
SUMMARY IN ONE LINE:
"expiration" needs a Date object, not just time in milliseconds.
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
